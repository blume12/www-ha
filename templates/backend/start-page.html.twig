{% extends "layout.html.twig" %}
{% block headline %}
    <h1>Übersicht</h1>
{% endblock %}

{% block content %}

    <p>
        Hallo {{ user.appellation }} {{ user.lastname }}!
    </p>

    <div class="width50">
        <h2>Reservierungen suchen</h2>
        <form action="{{ reservationSearchAction }}" method="post">
            <label for="reservationName">Reservierungsnummer / Name / E-Mail:</label>
            <input type="text" name="reservationName" id="reservationName"/>
            <input type="submit" value="Suchen"/>
        </form>
    </div>
    <div class="width50 right">
        <h2>Programminformationen</h2>
        <p {% if countNotVisiblePrograms > 0 %}class="error"{% endif %}>
            Anzahl der Programme, die nicht online sind:
            <a href="{{ linkProgram }}"><span>{{ countNotVisiblePrograms }}</span></a>
        </p>
        <h2>Anzahl der Reservierungen</h2>
        <p>
            Anzahl <strong>aller</strong> Reservierungen: {{ countReservationAll }}
        </p>
        <p>
            Anzahl <strong>offene</strong> Reservierungen: {{ countReservationOpen }}
        </p>
        <p>
            Anzahl <strong>bezahlte</strong> Reservierungen: {{ countReservationPaid }}
        </p>
        <p>
            Anzahl <strong>abgelaufener</strong> Reservierungen: {{ countReservationExpired }}
        </p>

    </div>
    <div>
        <h2>Statistiken</h2>
        <ul>
            <li>Programme online: {{ countProgram }}</li>
            <li>Plätze insgesamt: {{ countMaxPlaces }}</li>
            <li>Frei verfügbare Plätze: {{ countFreePlaces }}</li>
            <li>
                Plätze reserviert: {{ countReservation }}

                <ul>
                    {% for mode in countsPrices.reservation %}
                        <li>davon mit {{ mode.name }} reserviert: {{ mode.count }}</li>
                    {% endfor %}
                </ul>
            </li>
            {#<li>Plätze verbindlich gebucht: {{ countBooking }}
                 <ul>
                     {% for mode in countsPrices.booking %}
                         <li>davon mit {{ mode.name }} reserviert: {{ mode.count }}</li>
                     {% endfor %}
                 </ul>
             </li>
             #}
        </ul>

    </div>
{% endblock %}
